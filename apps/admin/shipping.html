<!doctype html><html lang='vi'><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width,initial-scale=1'/><title>Vận chuyển</title><link rel="stylesheet" href="./styles.css"/><script src="./admin_real.js?v=25"></script><!-- build:21 -->
</head><body><div class='container'><div class='header'><div class='title'>Vận chuyển</div><div class='nav'><a href='./products.html' class='badge'>Sản phẩm</a><a href='./banners.html' class='badge'>Banner</a><a href='./vouchers.html' class='badge'>Voucher</a><a href='./orders.html' class='badge'>Đơn hàng</a><a href='./stats.html' class='badge'>Thống kê</a><a href='./shipping.html' class='badge'>Vận chuyển</a><a href='./ads.html' class='badge'>Quảng cáo</a><span class='badge'>API: <span data-api-base></span></span></div></div>
<div class="grid">
  <div class="card"><div class="title">Super (Aggregator)</div><input id="super_key" class="input" placeholder="API Super Key"/><button id="save_super" class="btn">Lưu</button></div>
  <div class="card"><div class="title">J&T</div><input id="jt_key" class="input" placeholder="API Key"/><button id="save_jt" class="btn">Lưu</button></div>
  <div class="card"><div class="title">SPX</div><input id="spx_key" class="input" placeholder="API Key"/><button id="save_spx" class="btn">Lưu</button></div>
  <div class="card"><div class="title">Ahamove</div><input id="aha_key" class="input" placeholder="API Key"/><button id="save_aha" class="btn">Lưu</button></div>
  <div class="card"><div class="title">Grab</div><input id="grab_key" class="input" placeholder="API Key"/><button id="save_grab" class="btn">Lưu</button></div>
</div>
<script>
['super','jt','spx','aha','grab'].forEach(k=>{
  let key=''; fetch(Admin.getApiBase()+'/public/settings').then(r=>r.json()).then(d=>{key=((d.settings||{}).shipping||{}).credentials?.[k]?.key||''; if(inp) inp.value=key;}).catch(()=>{if(inp) inp.value='';}); const inp = document.getElementById(k+'_key'); if(inp) inp.value = key;
  const btn = document.getElementById('save_'+k); if(btn) btn.onclick = ()=>{ localStorage.setItem('ship_'+k, document.getElementById(k+'_key').value.trim()); Admin.toast('Đã lưu '+k.toUpperCase()); };
});
</script>
</div><script>document.addEventListener('DOMContentLoaded',()=>Admin&&Admin.renderApiBase());</script>
<script>
document.addEventListener('DOMContentLoaded',()=>{
  try{
    fetch(Admin.getApiBase()+'/public/settings').then(r=>r.json()).then(s=>{
      const val = (s && s.shipping && s.shipping.super_key) || '';
      var el=document.getElementById('super_key'); if(el && !el.value) el.value=val;
    });
  }catch(e){}
  const btn = document.getElementById('save_super');
  if(btn && !btn.__wired){ btn.__wired=true; btn.addEventListener('click', async ()=>{
    const v = (document.getElementById('super_key')||{}).value||'';
    await Admin.req('/admin/settings/upsert',{method:'POST', body:{path:'shipping.super_key', value:v}});
    Admin.toast('Đã lưu Super Key');
  });}
});
</script>
</body></html>