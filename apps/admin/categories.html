<!doctype html><html lang="vi"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Danh mục</title><link rel="stylesheet" href="./styles.css"/><script src="./admin_real.js?v=25"></script><!-- build:21 -->
</head>
<body><div class="container">
<div class="header"><div class="title">Danh mục</div><div class="nav"><a href="./products.html" class="badge">Sản phẩm</a><a href="./banners.html" class="badge">Banner</a><a href="./vouchers.html" class="badge">Voucher</a><a href="./orders.html" class="badge">Đơn hàng</a><a href="./stats.html" class="badge">Thống kê</a><span class="badge">API: <span data-api-base></span></span></div></div>
<div class="card"><div class="row"><div class="col">
<label>Tên</label><input id="name" class="input"/><label>Slug</label><input id="slug" class="input" placeholder="tu-dong-neu-de-trong"/><label>Thứ tự</label><input id="order" type="number" class="input" value="0"/>
<div class="toolbar"><button id="save" class="btn primary">Lưu</button></div></div></div></div>
<div class="card"><div class="title">Danh sách</div><table class="table"><thead><tr><th>Tên</th><th>Slug</th><th>Thứ tự</th><th></th></tr></thead><tbody id="list"></tbody></table></div>
</div>
<script>
const $=s=>document.querySelector(s); Admin.ensureAuth(); Admin.renderApiBase();
$('#save').onclick = async ()=>{ const body={name:$('#name').value, slug:$('#slug').value, order:Number($('#order').value||0)}; let r=await Admin.req('/admin/categories/upsert',{method:'POST',body}); if(r&&r.ok!==false){ Admin.toast('Đã lưu'); load(); } else alert('Lưu thất bại'); };
async function load(){ const r=await Admin.req('/admin/categories'); const items=(r&&r.items)||[]; const tb=$('#list'); tb.innerHTML=''; items.forEach(c=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td>${c.name}</td><td>${c.slug}</td><td>${c.order||0}</td><td><button class="btn danger" data-del="${c.id}">Xoá</button></td>`; tb.appendChild(tr); }); }
document.body.addEventListener('click', async (e)=>{ const id=e.target?.dataset?.del; if(id){ if(!confirm('Xoá danh mục?')) return; const r=await Admin.req('/admin/categories/delete',{method:'POST',body:{id}}); if(r&&r.ok){ load(); } } }); load();
</script><script>
(function(){
  // simple cache buster loader for module scripts
  window.__SHV_BUILD__ = window.__SHV_BUILD__ || (Date.now() + '');
  window.loadModule = function(path){
    try{
      var s = document.createElement('script');
      s.type = 'module';
      s.src = path + (path.indexOf('?')>-1 ? '&' : '?') + 'v=' + window.__SHV_BUILD__;
      document.head.appendChild(s);
    }catch(e){ console.warn('loader error', e); }
  };
})();
</script>

<script>loadModule("/apps/admin/admin_real.js");</script>
</body></html>