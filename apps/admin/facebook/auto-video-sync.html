<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Video Sync - Shop Huy V√¢n</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Wizard Styles */
        .wizard-container { max-width: 1100px; margin: 20px auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        
        /* Steps Navigation */
        .wizard-steps { display: flex; justify-content: space-between; margin-bottom: 40px; position: relative; }
        .wizard-steps::before { content: ''; position: absolute; top: 15px; left: 0; right: 0; height: 2px; background: #e5e7eb; z-index: 0; }
        .wizard-step { position: relative; z-index: 1; background: white; padding: 0 10px; text-align: center; width: 20%; opacity: 0.6; transition: all 0.3s; }
        .wizard-step.active { opacity: 1; font-weight: bold; }
        .wizard-step.completed .step-circle { background: #10b981; color: white; border-color: #10b981; }
        .wizard-step.active .step-circle { background: #2563eb; color: white; border-color: #2563eb; box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2); }
        .step-circle { width: 32px; height: 32px; border-radius: 50%; background: white; border: 2px solid #d1d5db; display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; font-weight: bold; color: #6b7280; transition: all 0.3s; }
        
        /* Step Content */
        .step-content { display: none; animation: fadeIn 0.4s ease; }
        .step-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* UI Components */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; margin-top: 20px; }
        .product-card { border: 2px solid #e5e7eb; border-radius: 10px; overflow: hidden; cursor: pointer; transition: all 0.2s; }
        .product-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .product-card.selected { border-color: #2563eb; background: #eff6ff; ring: 2px solid #2563eb; }
        .product-card img { width: 100%; height: 150px; object-fit: cover; }
        .product-card .info { padding: 10px; }
        
        .video-input-box { background: #f9fafb; padding: 40px; border: 2px dashed #d1d5db; border-radius: 12px; text-align: center; margin: 20px 0; }
        .btn { padding: 10px 24px; border-radius: 6px; border: none; cursor: pointer; font-weight: 600; transition: all 0.2s; display: inline-flex; align-items: center; gap: 8px; }
        .btn-primary { background: #2563eb; color: white; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-primary:disabled { background: #93c5fd; cursor: not-allowed; }
        .btn-secondary { background: #f3f4f6; color: #374151; border: 1px solid #d1d5db; }
        
        /* Variants Tabs */
        .variants-tabs { display: flex; gap: 10px; border-bottom: 1px solid #e5e7eb; padding-bottom: 10px; margin-bottom: 20px; overflow-x: auto; }
        .tab-item { padding: 8px 16px; border-radius: 20px; border: 1px solid #e5e7eb; cursor: pointer; white-space: nowrap; }
        .tab-item.active { background: #2563eb; color: white; border-color: #2563eb; }
        
        /* Results */
        .result-item { display: flex; align-items: center; justify-content: space-between; padding: 15px; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 10px; }
        .status-badge { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; text-transform: uppercase; }
        .status-success { background: #d1fae5; color: #065f46; }
        .status-failed { background: #fee2e2; color: #991b1b; }
        .status-pending { background: #fef3c7; color: #92400e; }

        /* Utilities */
        .hidden { display: none !important; }
        .loader { border: 3px solid #f3f3f3; border-top: 3px solid #3498db; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50">

    <div style="background: #1e293b; color: white; padding: 15px;">
        <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center;">
            <h2 style="margin:0;">üé¨ Auto Video Sync</h2>
            <span style="margin-left: 20px; font-size: 14px; opacity: 0.8;">TikTok ‚Üí AI Content ‚Üí Fanpages ‚Üí Ads</span>
            <div style="margin-left: auto;">
                <a href="../index.html" style="color: white; text-decoration: none;">‚Üê V·ªÅ Admin</a>
            </div>
        </div>
    </div>

    <div class="wizard-container">
        
        <div class="wizard-steps">
            <div class="wizard-step active" id="indicator-1">
                <div class="step-circle">1</div>
                <div class="step-label">S·∫£n ph·∫©m</div>
            </div>
            <div class="wizard-step" id="indicator-2">
                <div class="step-circle">2</div>
                <div class="step-label">Video</div>
            </div>
            <div class="wizard-step" id="indicator-3">
                <div class="step-circle">3</div>
                <div class="step-label">AI Content</div>
            </div>
            <div class="wizard-step" id="indicator-4">
                <div class="step-circle">4</div>
                <div class="step-label">Ch·ªçn Page</div>
            </div>
            <div class="wizard-step" id="indicator-5">
                <div class="step-circle">5</div>
                <div class="step-label">K·∫øt qu·∫£</div>
            </div>
        </div>

        <div class="step-content active" id="step-1">
            <h3>üì¶ B∆∞·ªõc 1: Ch·ªçn s·∫£n ph·∫©m c·∫ßn qu·∫£ng b√°</h3>
            <p class="text-gray-500">Ch·ªçn s·∫£n ph·∫©m t·ª´ h·ªá th·ªëng Shop Huy V√¢n ƒë·ªÉ AI c√≥ d·ªØ li·ªáu vi·∫øt b√†i.</p>
            
            <div style="margin: 15px 0;">
                <input type="text" id="searchProduct" placeholder="üîç T√¨m t√™n s·∫£n ph·∫©m..." style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;">
            </div>

            <div id="productGrid" class="product-grid">
                <div class="text-center" style="grid-column: 1/-1; padding: 20px;">ƒêang t·∫£i s·∫£n ph·∫©m...</div>
            </div>

            <div class="actions" style="margin-top: 30px; text-align: right;">
                <button class="btn btn-primary" id="btnStep1Next" disabled>Ti·∫øp theo ‚Üí</button>
            </div>
        </div>

        <div class="step-content" id="step-2">
            <h3>üé¨ B∆∞·ªõc 2: Nh·∫≠p Video ngu·ªìn (TikTok)</h3>
            <p class="text-gray-500">H·ªá th·ªëng s·∫Ω t·∫£i video v·ªÅ R2 (x√≥a logo) ƒë·ªÉ an to√†n khi ƒëƒÉng l√™n Facebook.</p>

            <div class="video-input-box">
                <input type="text" id="tiktokUrl" placeholder="Paste link TikTok v√†o ƒë√¢y (V√≠ d·ª•: https://www.tiktok.com/@user/video/...)" 
                    style="width: 80%; padding: 12px; font-size: 16px; border: 1px solid #d1d5db; border-radius: 6px; margin-bottom: 15px;">
                <br>
                <button class="btn btn-primary" id="btnDownload">
                    <span class="loader hidden" id="loaderDownload"></span> T·∫£i & Ph√¢n t√≠ch
                </button>
            </div>

            <div id="videoPreviewArea" class="hidden" style="text-align: center;">
                <h4>‚úÖ ƒê√£ t·∫£i th√†nh c√¥ng!</h4>
                <video id="videoPlayer" controls style="max-height: 300px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);"></video>
                <p id="videoInfo" style="font-size: 13px; color: #666; margin-top: 5px;"></p>
            </div>

            <div class="actions" style="margin-top: 30px; display: flex; justify-content: space-between;">
                <button class="btn btn-secondary" onclick="wizard.goToStep(1)">‚Üê Quay l·∫°i</button>
                <button class="btn btn-primary" id="btnStep2Next" disabled>Ti·∫øp theo ‚Üí</button>
            </div>
        </div>

        <div class="step-content" id="step-3">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3>ü§ñ B∆∞·ªõc 3: AI S√°ng t·∫°o n·ªôi dung</h3>
                <button class="btn btn-secondary" id="btnRegenerate" style="font-size: 12px;">üîÑ T·∫°o l·∫°i</button>
            </div>
            
            <div id="aiLoading" class="text-center hidden" style="padding: 40px;">
                <div class="loader" style="width: 40px; height: 40px; margin: 0 auto 15px;"></div>
                <p>Gemini ƒëang "v·∫Øt √≥c" vi·∫øt 5 phi√™n b·∫£n qu·∫£ng c√°o...</p>
            </div>

            <div id="aiContentArea" class="hidden">
                <div class="variants-tabs" id="variantTabs">
                    </div>

                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                    <div>
                        <label style="font-weight: bold; display: block; margin-bottom: 5px;">N·ªôi dung b√†i vi·∫øt:</label>
                        <textarea id="variantCaption" rows="12" style="width: 100%; padding: 15px; border: 1px solid #d1d5db; border-radius: 8px; font-family: inherit;"></textarea>
                        <div style="text-align: right; margin-top: 5px;">
                            <button class="btn btn-secondary" id="btnSaveVariant" style="font-size: 12px;">üíæ L∆∞u ch·ªânh s·ª≠a</button>
                        </div>
                    </div>
                    <div style="background: #f3f4f6; padding: 15px; border-radius: 8px;">
                        <h4>Hashtags</h4>
                        <div id="variantHashtags" style="color: #2563eb; font-weight: 500;"></div>
                        <hr style="margin: 15px 0; border-color: #e5e7eb;">
                        <h4>Tone (Gi·ªçng vƒÉn)</h4>
                        <span id="variantTone" style="background: #dbeafe; color: #1e40af; padding: 2px 8px; border-radius: 4px; font-size: 12px;"></span>
                    </div>
                </div>
            </div>

            <div class="actions" style="margin-top: 30px; display: flex; justify-content: space-between;">
                <button class="btn btn-secondary" onclick="wizard.goToStep(2)">‚Üê Quay l·∫°i</button>
                <button class="btn btn-primary" id="btnStep3Next">Ti·∫øp theo ‚Üí</button>
            </div>
        </div>

        <div class="step-content" id="step-4">
            <h3>üì¢ B∆∞·ªõc 4: Ph√¢n ph·ªëi l√™n Fanpage</h3>
            <p class="text-gray-500">Ch·ªçn Page v√† phi√™n b·∫£n n·ªôi dung ph√π h·ª£p cho t·ª´ng Page.</p>

            <div style="background: #fff; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden; margin-top: 20px;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead style="background: #f9fafb;">
                        <tr>
                            <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb;">Fanpage</th>
                            <th style="padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb;">Ch·ªçn Version Content</th>
                            <th style="padding: 12px; text-align: center; border-bottom: 1px solid #e5e7eb;">Ch·ªçn ƒëƒÉng</th>
                        </tr>
                    </thead>
                    <tbody id="fanpageList">
                        </tbody>
                </table>
            </div>

            <div class="actions" style="margin-top: 30px; display: flex; justify-content: space-between;">
                <button class="btn btn-secondary" onclick="wizard.goToStep(3)">‚Üê Quay l·∫°i</button>
                <button class="btn btn-primary" id="btnPublish" style="background: #059669;">üöÄ ƒêƒÉng b√†i ngay</button>
            </div>
        </div>

        <div class="step-content" id="step-5">
            <h3>üéâ Ho√†n t·∫•t! K·∫øt qu·∫£ ƒëƒÉng b√†i</h3>
            
            <div id="publishResults" style="margin-top: 20px;">
                </div>

            <div style="margin-top: 40px; border-top: 2px dashed #e5e7eb; padding-top: 20px;">
                <h4>üöÄ M·ªü r·ªông: T·∫°o qu·∫£ng c√°o t·ª´ b√†i vi·∫øt n√†y?</h4>
                <div style="background: #eff6ff; padding: 20px; border-radius: 8px; margin-top: 10px;">
                    <label style="display: flex; align-items: center; gap: 10px; font-weight: bold; font-size: 18px; cursor: pointer;">
                        <input type="checkbox" id="cbCreateAds" style="width: 20px; height: 20px;"> T·∫°o Facebook Ads Campaign
                    </label>
                    
                    <div id="adsConfigArea" class="hidden" style="margin-top: 15px; padding-left: 30px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label style="display: block; font-size: 13px; margin-bottom: 5px;">T√™n Campaign</label>
                                <input type="text" id="campaignName" placeholder="V√≠ d·ª•: Chi·∫øn d·ªãch N·ªìi chi√™n - T11" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px;">
                            </div>
                            <div>
                                <label style="display: block; font-size: 13px; margin-bottom: 5px;">Ng√¢n s√°ch ng√†y (VNƒê)</label>
                                <input type="number" id="dailyBudget" value="50000" step="10000" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px;">
                            </div>
                        </div>
                        <button class="btn btn-primary" id="btnCreateAds" style="margin-top: 15px;">‚ö° T·∫°o Ads Campaign</button>
                    </div>
                </div>
            </div>

            <div class="actions" style="margin-top: 30px; text-align: center;">
                <button class="btn btn-secondary" onclick="location.reload()">üîÑ T·∫°o Job M·ªõi</button>
            </div>
        </div>

    </div>

    <script src="./auto-video-sync.js"></script>
</body>
</html>