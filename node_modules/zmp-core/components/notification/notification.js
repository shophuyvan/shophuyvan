(function zmpComponentLoader(t,e){void 0===e&&(e=!0);var n=t.$,o=t.utils,i=(t.getDevice,t.getSupport,t.Class,t.Modal),r=(t.ConstructorMethods,t.ModalMethods),s=o.extend,a=o.now,c=o.nextTick;function l(t){this.wrapped=t}function u(t){var e,n;function o(e,n){try{var r=t[e](n),s=r.value,a=s instanceof l;Promise.resolve(a?s.wrapped:s).then((function(t){a?o("return"===e?"return":"next",t):i(r.done?"return":"normal",t)}),(function(t){o("throw",t)}))}catch(t){i("throw",t)}}function i(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?o(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise((function(r,s){var a={key:t,arg:i,resolve:r,reject:s,next:null};n?n=n.next=a:(e=n=a,o(t,i))}))},"function"!=typeof t.return&&(this.return=void 0)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}u.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},u.prototype.next=function(t){return this._invoke("next",t)},u.prototype.throw=function(t){return this._invoke("throw",t)},u.prototype.return=function(t){return this._invoke("return",t)};var v=function(t){var e,o;function i(e,o){var i,r=s({on:{}},e.params.notification,o),l=p(i=t.call(this,e,r)||this);l.app=e,l.params=r;var u,f,v,h,d,m,y,x=l.params,g=x.icon,b=x.title,$=x.titleRightText,k=x.subtitle,w=x.text,C=x.closeButton,T=x.closeTimeout,j=x.cssClass,M=x.closeOnClick;if(l.params.el)u=n(l.params.el);else{var _=l.render({icon:g,title:b,titleRightText:$,subtitle:k,text:w,closeButton:C,cssClass:j});u=n(_)}if(u&&u.length>0&&u[0].zmpModal)return u[0].zmpModal||p(i);if(0===u.length)return l.destroy()||p(i);s(l,{$el:u,el:u[0],type:"notification"}),u[0].zmpModal=l,C&&u.find(".notification-close-button").on("click",(function(){l.close()})),u.on("click",(function(t){C&&n(t.target).closest(".notification-close-button").length||(l.emit("local::click notificationClick",l),M&&l.close())})),l.on("beforeDestroy",(function(){u.off("click")}));var O,R={};function z(t){f||(f=!0,v=!1,h=void 0,m=a(),R.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,R.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY)}function B(t){if(f){var e="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,n="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY;if(void 0===h&&(h=!!(h||Math.abs(n-R.y)<Math.abs(e-R.x))),h)f=!1;else{t.preventDefault(),v||(l.$el.removeClass("notification-transitioning"),l.$el.transition(0),y=l.$el[0].offsetHeight/2),v=!0;var o=d=n-R.y;d>0&&(o=Math.pow(d,.8)),l.$el.transform("translate3d(0, "+o+"px, 0)")}}}function D(){if(!f||!v)return f=!1,void(v=!1);if(f=!1,v=!1,0!==d){var t=a()-m;l.$el.transition(""),l.$el.addClass("notification-transitioning"),l.$el.transform(""),(d<-10&&t<300||-d>=y/1)&&l.close()}}function E(){O=c((function(){f&&v?E():l.close()}),T)}return l.on("open",(function(){l.params.swipeToClose&&(l.$el.on(e.touchEvents.start,z,{passive:!0}),e.on("touchmove:active",B),e.on("touchend:passive",D)),n(".notification.modal-in").each((function(t){var n=e.notification.get(t);t!==l.el&&n&&n.close()})),T&&E()})),l.on("close beforeDestroy",(function(){l.params.swipeToClose&&(l.$el.off(e.touchEvents.start,z,{passive:!0}),e.off("touchmove:active",B),e.off("touchend:passive",D)),clearTimeout(O)})),l||p(i)}return o=t,(e=i).prototype=Object.create(o.prototype),e.prototype.constructor=e,f(e,o),i.prototype.render=function(){var t=this;if(t.params.render)return t.params.render.call(t,t);var e=t.params,n=e.icon,o=e.title,i=e.titleRightText,r=e.subtitle,s=e.text,a=e.closeButton,c=e.cssClass;return $jsx("div",{class:"notification "+(c||"")},$jsx("div",{class:"notification-header"},n&&$jsx("div",{class:"notification-icon"},n),o&&$jsx("div",{class:"notification-title"},o),i&&$jsx("div",{class:"notification-title-right-text"},i),a&&$jsx("span",{class:"notification-close-button"})),$jsx("div",{class:"notification-content"},r&&$jsx("div",{class:"notification-subtitle"},r),s&&$jsx("div",{class:"notification-text"},s)))},i}(i),h={name:"notification",static:{Notification:v},create:function(){this.notification=s({},r({app:this,constructor:v,defaultSelector:".notification.modal-in"}))},params:{notification:{icon:null,title:null,titleRightText:null,subtitle:null,text:null,closeButton:!1,closeTimeout:null,closeOnClick:!1,swipeToClose:!0,cssClass:null,render:null,containerEl:null}}};if(e){if(t.prototype.modules&&t.prototype.modules[h.name])return;t.use(h),t.instance&&(t.instance.useModuleParams(h,t.instance.params),t.instance.useModule(h))}return h}(ZMP, typeof ZMPAutoInstallComponent === 'undefined' ? undefined : ZMPAutoInstallComponent))
